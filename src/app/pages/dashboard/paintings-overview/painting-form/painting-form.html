@let painting = formService.painting;

<div class="overlay">
  <form [formGroup]="form" class="overlay-content-box" (ngSubmit)="onSubmit()">

    <p class="form-title">
      {{painting ? 'Edit ' + painting.title : 'New Painting'}}
    </p>

    <div class="control-field">
      <input type="text" id="title" formControlName="title" class="shari-input" required>
      <label for="title" [class.top]="form.get('title')?.value">Title*</label>
    </div>

    <div class="half-inputs-wrapper">
      <div class="control-field">
        <input type="text" id="material" formControlName="material" class="shari-input">
        <label for="material" [class.top]="form.get('material')?.value">Material</label>
      </div>

      <div class="control-field">
        <input type="number" id="year" formControlName="year" class="shari-input" min="2000" [max]="maxYear">
        <label for="year" [class.top]="form.get('year')?.value">Year</label>
      </div>
    </div>

    <div class="half-inputs-wrapper">
      <div class="control-field">
        <input type="number" id="width" formControlName="width" class="shari-input" min="1" required>
        <label for="width" [class.top]="form.get('width')?.value">Width* (cm)</label>
      </div>

      <div class="control-field">
        <input type="number" id="height" formControlName="height" class="shari-input" min="1" required>
        <label for="height" [class.top]="form.get('height')?.value">Height* (cm)</label>
      </div>
    </div>

    <div class="control-field">
      <input type="file" id="main_image" name="main_image" class="shari-input" accept="image/*"
        (change)="onImageChange($event)">
      <label for="main_image" class="top">Main Image*</label>
    </div>

    <div class="buttons-box">
      <shari-button type="reset" variant="outlined" (onClick)="closeForm()" [disabled]="isLoading()">
        Cancel
      </shari-button>
      <shari-button type="submit" [loading]="isLoading()" [disabled]="form.invalid || isLoading()">
        @if(isLoading()){
        <mat-spinner [diameter]="15" [strokeWidth]="2" />
        } @else {
        Save
        }
      </shari-button>
    </div>

  </form>
</div>