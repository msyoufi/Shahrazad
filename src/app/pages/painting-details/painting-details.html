@let pt = painting();

@if (pt) {
<div class="painting-detalis-component-grid">
  <div class="images-list">
    <img [src]="pt.main_image.thumbnail" alt="Main painting thumbnail"
      (click)="onImageSelect(pt.main_image.large, pt.main_image.order)">

    @for(closeUp of pt.close_ups; track closeUp.id){
    <img [src]="closeUp.thumbnail" (click)="onImageSelect(closeUp.large, closeUp.order)"
      alt="A thumbnail of a Close-up of the painting">
    }

  </div>

  <div class="image-view-box" (mousemove)="showControls()" (touchstart)="showControls()">
    <img [src]="currentImageUrl()" alt="Painting Image View" (load)="isLoading.set(false)" shariSwipe
      (swipe)="onImageSwipe($event)" (click)="onImageViewClick()">

    @if(isLoading()){
    <div class="loading-overlay">
      <mat-spinner [diameter]="25" [strokeWidth]="2" />
    </div>
    }

    <div class="swiper-buttons-box" [class.visible]="controlsVisible()">
      <button (click)="onImageSwipe('right')" [disabled]="!controlsVisible()">
        &#8592;
      </button>
      <button (click)="onImageSwipe('left')" [disabled]="!controlsVisible()">
        &#8594;
      </button>
    </div>
  </div>

  <div class="painting-data-box">
    <h2>{{pt.title}}</h2>
    <p>{{pt.material}} &#8226; {{pt.year ? pt.year : ''}}</p>
    <p>{{pt.width}} x {{pt.height}} cm</p>
  </div>
</div>

<div id="focus_overlay" class="focus-container overlay" [class.visible]="isFocusMode()"
  (click)="onFocusContainerClick($event)" (mousemove)="showControls()">
  <div class="control-bar" [class.visible]="controlsVisible()">
    <p>51 / 55</p>
    <button (click)="closeFocusMode()">&#10005;</button>
  </div>

  <img [src]="currentImageUrl()" alt="Painting Image View" (load)="isLoading.set(false)" shariSwipe
    (swipe)="onImageSwipe($event)" (touchstart)="showControls()">

  <div class="swiper-buttons-box" [class.visible]="controlsVisible()">
    <button (click)="onImageSwipe('right')" [disabled]="!controlsVisible()">
      &#8592;
    </button>
    <button (click)="onImageSwipe('left')" [disabled]="!controlsVisible()">
      &#8594;
    </button>
  </div>

</div>

} @else {
<mat-spinner [diameter]="20" [strokeWidth]="2" />
}